{
  "info": {
    "name": "PDF Editor API",
    "description": "API para procesamiento de PDFs - Inserción de texto e imágenes\n\n🔗 Repository: https://github.com/jcguzmanr/pdf-digital-signature-api\n📖 Docs: {{baseUrl}}/docs\n🏥 Health: {{baseUrl}}/health",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "12345678-1234-1234-1234-123456789012",
    "updatedAt": "2025-06-11T12:30:00.000Z"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "🏠 API Info",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/",
          "host": ["{{baseUrl}}"],
          "path": [""]
        },
        "description": "Obtener información general de la API y sus endpoints disponibles"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has API info', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('message');",
              "    pm.expect(jsonData).to.have.property('version');",
              "    pm.expect(jsonData).to.have.property('endpoints');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "🏥 Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Verificar el estado de salud de la API y los directorios"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('API is healthy', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.status).to.eql('healthy');",
              "});",
              "",
              "pm.test('Directories exist', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.directories.input).to.be.true;",
              "    pm.expect(jsonData.directories.output).to.be.true;",
              "    pm.expect(jsonData.directories.assets).to.be.true;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📁 List Files",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/list-files",
          "host": ["{{baseUrl}}"],
          "path": ["list-files"]
        },
        "description": "Listar todos los archivos disponibles en los directorios input, output y assets"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has file directories', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('input');",
              "    pm.expect(jsonData).to.have.property('output');",
              "    pm.expect(jsonData).to.have.property('assets');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📄 Process PDF - Simple",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"pdf_path\": \"input/documento.pdf\",\n  \"output_path\": \"output/documento_firmado_postman.pdf\",\n  \"insertions\": [\n    {\n      \"type\": \"text\",\n      \"content\": \"Firmado electrónicamente según Ley N° 27269.\",\n      \"position\": [50, 30],\n      \"font_size\": 9,\n      \"pages\": \"all\"\n    },\n    {\n      \"type\": \"image\",\n      \"source\": \"assets/rubrica.png\",\n      \"position\": [400, 100],\n      \"pages\": 3\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/process-pdf",
          "host": ["{{baseUrl}}"],
          "path": ["process-pdf"]
        },
        "description": "Procesar un PDF con inserción simple de texto y una imagen"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('PDF processed successfully', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.success).to.be.true;",
              "    pm.expect(jsonData.message).to.include('exitosamente');",
              "    pm.expect(jsonData).to.have.property('output_path');",
              "});",
              "",
              "// Guardar output_path para usar en download",
              "const responseJson = pm.response.json();",
              "if (responseJson.output_path) {",
              "    const filename = responseJson.output_path.split('/').pop();",
              "    pm.collectionVariables.set('lastProcessedFile', filename);",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📄 Process PDF - Complete",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"pdf_path\": \"input/documento.pdf\",\n  \"output_path\": \"output/documento_completo_postman.pdf\",\n  \"insertions\": [\n    {\n      \"type\": \"text\",\n      \"content\": \"DOCUMENTO OFICIAL\",\n      \"position\": [200, 50],\n      \"font_size\": 16,\n      \"color\": [0, 0, 1],\n      \"pages\": \"first\"\n    },\n    {\n      \"type\": \"text\",\n      \"content\": \"Firmado electrónicamente según Ley N° 27269.\",\n      \"position\": [50, 30],\n      \"font_size\": 9,\n      \"color\": [0.5, 0.5, 0.5],\n      \"pages\": \"all\"\n    },\n    {\n      \"type\": \"image\",\n      \"source\": \"assets/rubrica_realista.png\",\n      \"position\": [400, 100],\n      \"width\": 120,\n      \"height\": 60,\n      \"pages\": \"last\"\n    },\n    {\n      \"type\": \"image\",\n      \"source\": \"assets/qr_realista.png\",\n      \"position\": [450, 50],\n      \"width\": 80,\n      \"height\": 80,\n      \"pages\": \"last\"\n    },\n    {\n      \"type\": \"image\",\n      \"source\": \"assets/sello_oficial.png\",\n      \"position\": [50, 100],\n      \"width\": 100,\n      \"height\": 100,\n      \"pages\": [1, 3]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/process-pdf",
          "host": ["{{baseUrl}}"],
          "path": ["process-pdf"]
        },
        "description": "Procesar PDF con múltiples insercciones: texto en diferentes páginas, imágenes con dimensiones específicas"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('PDF processed successfully', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.success).to.be.true;",
              "    pm.expect(jsonData).to.have.property('output_path');",
              "    pm.expect(jsonData).to.have.property('processed_at');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📤 Upload & Process PDF",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": "input/documento.pdf",
              "description": "Archivo PDF a procesar"
            },
            {
              "key": "insertions",
              "value": "[\n  {\n    \"type\": \"text\",\n    \"content\": \"Procesado vía Upload API\",\n    \"position\": [100, 50],\n    \"font_size\": 12,\n    \"color\": [0, 0.5, 0],\n    \"pages\": \"first\"\n  },\n  {\n    \"type\": \"image\",\n    \"source\": \"assets/qr.png\",\n    \"position\": [400, 200],\n    \"pages\": \"last\"\n  }\n]",
              "type": "text",
              "description": "JSON con las instrucciones de inserción"
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/upload-pdf",
          "host": ["{{baseUrl}}"],
          "path": ["upload-pdf"]
        },
        "description": "Subir un archivo PDF y procesarlo con instrucciones en una sola operación"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response is PDF file', function () {",
              "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/pdf');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📥 Download Processed File",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/download/{{lastProcessedFile}}",
          "host": ["{{baseUrl}}"],
          "path": ["download", "{{lastProcessedFile}}"]
        },
        "description": "Descargar un archivo procesado del directorio output. Usa la variable {{lastProcessedFile}} del último procesamiento."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response is PDF file', function () {",
              "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/pdf');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "📚 API Documentation",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/docs",
          "host": ["{{baseUrl}}"],
          "path": ["docs"]
        },
        "description": "Abrir la documentación automática de Swagger UI"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response is HTML', function () {",
              "    pm.expect(pm.response.headers.get('Content-Type')).to.include('text/html');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script que se ejecuta antes de cada request",
          "console.log('🚀 Ejecutando request a PDF Editor API');",
          "console.log('📅 Timestamp:', new Date().toISOString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script que se ejecuta después de cada response",
          "console.log('✅ Response recibida:', pm.response.status, pm.response.statusText);",
          "console.log('⏱️  Response time:', pm.response.responseTime + 'ms');"
        ]
      }
    }
  ]
} 